# 数组

## 定义

1. 线性表
2. 连续的内存空间和相同类型的数据

## 随机访问

声明数组时，已经指定数组的容量和起始内存地址

```c
a[i]_address = base_address + i * data_type_size
```

故需要读取数组中的任一元素时，时间复杂度是O(1)，实现了随机访问。

## 写操作

正因为限制了内存空间，所以在插入、删除某个元素时，会导致数组需要挪动大量的元素，平均时间复杂度都为O(n)。

### 插入

针对无序数组的优化，可在插入第k个位置时，将原数据搬到数组元素的最后，再将新数据直接放到第k个位置

### 删除

删除的优化，可使用删除标志，等到容量不足时，再一次性处理已标记删除的数据。（JVM标记清除就是这么干的）

## java集合容器和数组

Java中提供ArrayList，底层实现也是一种数组，将很多数组操作的细节封装了起来，并且支持动态扩容。

### 使用场合

1. 需要使用基本类型的时候，减少自动拆箱的性能损耗
2. 数据大小预先知道，可以使用数组
3. 业务开发直接用容器就足够了，一些底层的框架开发才选用数组

## 为什么从0开始编号

如果从1开始编号，则计算数组元素地址的公式会变成

```c
a[i]_address = base_address + (i-1) * data_type_size
```

多做了一次减法，对CPU来讲是多了一次减法计算的